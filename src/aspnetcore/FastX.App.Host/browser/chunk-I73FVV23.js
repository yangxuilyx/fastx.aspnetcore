import{a as St,b as Et}from"./chunk-HX46T5TW.js";import{a as $t}from"./chunk-CAQKKX4G.js";import{b as Dt}from"./chunk-3LEP76YH.js";import"./chunk-LFYJK5GB.js";import{b as vt,c as yt}from"./chunk-NN5I4ZQ6.js";import{a as dt,b as pt,c as de,f as ft,h as ht,j as _t,m as gt,n as Ct,o as xt,p as zt,q as bt}from"./chunk-36JYQPX4.js";import"./chunk-JQ4W37JH.js";import"./chunk-GOVML6XL.js";import{a as Ye}from"./chunk-GGEG7LNG.js";import{k as st,l as lt,m as mt,n as ut}from"./chunk-QA3WNWTC.js";import"./chunk-ZV26Q6Z5.js";import"./chunk-4V3WCFNY.js";import{R as Ke,S as Xe,T as et,U as tt,V as me,ba as it,d as Le,e as Q,f as Ae,fa as ue,g as Be,i as be,k as je,l as qe,m as He,n as Re,o as Ue,q as We,r as re,s as ae,v as Je,w as Ze}from"./chunk-K3UCEQBL.js";import{a as ct}from"./chunk-AAN5EPXW.js";import"./chunk-TH67R3V7.js";import{b as ot}from"./chunk-3OVYBGXJ.js";import"./chunk-C6FDTAOV.js";import"./chunk-IUQ3UXTC.js";import{Na as oe,Oa as Ge,Qa as se,Ra as le,cb as ce,kb as nt,lb as rt,qb as at}from"./chunk-R2HTRB5T.js";import"./chunk-HDIAUTON.js";import{w as Qe,z as Pe}from"./chunk-YRUIOUIJ.js";import"./chunk-FBUG2U6C.js";import{Db as j,Eb as _e,Fb as Ne,Gb as ie,Hb as U,Ib as W,Jb as f,Kb as p,Lb as w,Mb as ge,Nb as Ce,P as Me,Pb as q,Xb as T,Zb as $,bc as Ie,cc as C,dc as Z,jb as y,kb as N,kc as ne,lc as xe,ma as we,mb as Fe,oa as te,ob as he,ta as I,tb as E,ua as V,vc as Ve,wc as Oe,yc as ke,zc as ze}from"./chunk-25RHYGPJ.js";import{e as Vt,g as Ot}from"./chunk-W7ODNIXK.js";var Tt=Vt((ve,ye)=>{(function(o,d){typeof ve=="object"&&typeof ye<"u"?ye.exports=d():typeof define=="function"&&define.amd?define(d):(o=typeof globalThis<"u"?globalThis:o||self).dayjs=d()})(ve,function(){"use strict";var o=1e3,d=6e4,m=36e5,n="millisecond",r="second",l="minute",h="hour",x="day",P="week",F="month",Ee="quarter",O="year",H="date",De="Invalid Date",wt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Ft=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Nt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(s){var i=["th","st","nd","rd"],e=s%100;return"["+s+(i[(e-20)%10]||i[e]||i[0])+"]"}},pe=function(s,i,e){var a=String(s);return!a||a.length>=i?s:""+Array(i+1-a.length).join(e)+s},It={s:pe,z:function(s){var i=-s.utcOffset(),e=Math.abs(i),a=Math.floor(e/60),t=e%60;return(i<=0?"+":"-")+pe(a,2,"0")+":"+pe(t,2,"0")},m:function s(i,e){if(i.date()<e.date())return-s(e,i);var a=12*(e.year()-i.year())+(e.month()-i.month()),t=i.clone().add(a,F),u=e-t<0,c=i.clone().add(a+(u?-1:1),F);return+(-(a+(e-t)/(u?t-c:c-t))||0)},a:function(s){return s<0?Math.ceil(s)||0:Math.floor(s)},p:function(s){return{M:F,y:O,w:P,d:x,D:H,h,m:l,s:r,ms:n,Q:Ee}[s]||String(s||"").toLowerCase().replace(/s$/,"")},u:function(s){return s===void 0}},Y="en",L={};L[Y]=Nt;var $e="$isDayjsObject",fe=function(s){return s instanceof X||!(!s||!s[$e])},K=function s(i,e,a){var t;if(!i)return Y;if(typeof i=="string"){var u=i.toLowerCase();L[u]&&(t=u),e&&(L[u]=e,t=u);var c=i.split("-");if(!t&&c.length>1)return s(c[0])}else{var g=i.name;L[g]=i,t=g}return!a&&t&&(Y=t),t||!a&&Y},b=function(s,i){if(fe(s))return s.clone();var e=typeof i=="object"?i:{};return e.date=s,e.args=arguments,new X(e)},_=It;_.l=K,_.i=fe,_.w=function(s,i){return b(s,{locale:i.$L,utc:i.$u,x:i.$x,$offset:i.$offset})};var X=function(){function s(e){this.$L=K(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[$e]=!0}var i=s.prototype;return i.parse=function(e){this.$d=function(a){var t=a.date,u=a.utc;if(t===null)return new Date(NaN);if(_.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var c=t.match(wt);if(c){var g=c[2]-1||0,z=(c[7]||"0").substring(0,3);return u?new Date(Date.UTC(c[1],g,c[3]||1,c[4]||0,c[5]||0,c[6]||0,z)):new Date(c[1],g,c[3]||1,c[4]||0,c[5]||0,c[6]||0,z)}}return new Date(t)}(e),this.init()},i.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},i.$utils=function(){return _},i.isValid=function(){return this.$d.toString()!==De},i.isSame=function(e,a){var t=b(e);return this.startOf(a)<=t&&t<=this.endOf(a)},i.isAfter=function(e,a){return b(e)<this.startOf(a)},i.isBefore=function(e,a){return this.endOf(a)<b(e)},i.$g=function(e,a,t){return _.u(e)?this[a]:this.set(t,e)},i.unix=function(){return Math.floor(this.valueOf()/1e3)},i.valueOf=function(){return this.$d.getTime()},i.startOf=function(e,a){var t=this,u=!!_.u(a)||a,c=_.p(e),g=function(B,D){var k=_.w(t.$u?Date.UTC(t.$y,D,B):new Date(t.$y,D,B),t);return u?k:k.endOf(x)},z=function(B,D){return _.w(t.toDate()[B].apply(t.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(D)),t)},v=this.$W,S=this.$M,M=this.$D,R="set"+(this.$u?"UTC":"");switch(c){case O:return u?g(1,0):g(31,11);case F:return u?g(1,S):g(0,S+1);case P:var A=this.$locale().weekStart||0,G=(v<A?v+7:v)-A;return g(u?M-G:M+(6-G),S);case x:case H:return z(R+"Hours",0);case h:return z(R+"Minutes",1);case l:return z(R+"Seconds",2);case r:return z(R+"Milliseconds",3);default:return this.clone()}},i.endOf=function(e){return this.startOf(e,!1)},i.$set=function(e,a){var t,u=_.p(e),c="set"+(this.$u?"UTC":""),g=(t={},t[x]=c+"Date",t[H]=c+"Date",t[F]=c+"Month",t[O]=c+"FullYear",t[h]=c+"Hours",t[l]=c+"Minutes",t[r]=c+"Seconds",t[n]=c+"Milliseconds",t)[u],z=u===x?this.$D+(a-this.$W):a;if(u===F||u===O){var v=this.clone().set(H,1);v.$d[g](z),v.init(),this.$d=v.set(H,Math.min(this.$D,v.daysInMonth())).$d}else g&&this.$d[g](z);return this.init(),this},i.set=function(e,a){return this.clone().$set(e,a)},i.get=function(e){return this[_.p(e)]()},i.add=function(e,a){var t,u=this;e=Number(e);var c=_.p(a),g=function(S){var M=b(u);return _.w(M.date(M.date()+Math.round(S*e)),u)};if(c===F)return this.set(F,this.$M+e);if(c===O)return this.set(O,this.$y+e);if(c===x)return g(1);if(c===P)return g(7);var z=(t={},t[l]=d,t[h]=m,t[r]=o,t)[c]||1,v=this.$d.getTime()+e*z;return _.w(v,this)},i.subtract=function(e,a){return this.add(-1*e,a)},i.format=function(e){var a=this,t=this.$locale();if(!this.isValid())return t.invalidDate||De;var u=e||"YYYY-MM-DDTHH:mm:ssZ",c=_.z(this),g=this.$H,z=this.$m,v=this.$M,S=t.weekdays,M=t.months,R=t.meridiem,A=function(D,k,J,ee){return D&&(D[k]||D(a,u))||J[k].slice(0,ee)},G=function(D){return _.s(g%12||12,D,"0")},B=R||function(D,k,J){var ee=D<12?"AM":"PM";return J?ee.toLowerCase():ee};return u.replace(Ft,function(D,k){return k||function(J){switch(J){case"YY":return String(a.$y).slice(-2);case"YYYY":return _.s(a.$y,4,"0");case"M":return v+1;case"MM":return _.s(v+1,2,"0");case"MMM":return A(t.monthsShort,v,M,3);case"MMMM":return A(M,v);case"D":return a.$D;case"DD":return _.s(a.$D,2,"0");case"d":return String(a.$W);case"dd":return A(t.weekdaysMin,a.$W,S,2);case"ddd":return A(t.weekdaysShort,a.$W,S,3);case"dddd":return S[a.$W];case"H":return String(g);case"HH":return _.s(g,2,"0");case"h":return G(1);case"hh":return G(2);case"a":return B(g,z,!0);case"A":return B(g,z,!1);case"m":return String(z);case"mm":return _.s(z,2,"0");case"s":return String(a.$s);case"ss":return _.s(a.$s,2,"0");case"SSS":return _.s(a.$ms,3,"0");case"Z":return c}return null}(D)||c.replace(":","")})},i.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},i.diff=function(e,a,t){var u,c=this,g=_.p(a),z=b(e),v=(z.utcOffset()-this.utcOffset())*d,S=this-z,M=function(){return _.m(c,z)};switch(g){case O:u=M()/12;break;case F:u=M();break;case Ee:u=M()/3;break;case P:u=(S-v)/6048e5;break;case x:u=(S-v)/864e5;break;case h:u=S/m;break;case l:u=S/d;break;case r:u=S/o;break;default:u=S}return t?u:_.a(u)},i.daysInMonth=function(){return this.endOf(F).$D},i.$locale=function(){return L[this.$L]},i.locale=function(e,a){if(!e)return this.$L;var t=this.clone(),u=K(e,a,!0);return u&&(t.$L=u),t},i.clone=function(){return _.w(this.$d,this)},i.toDate=function(){return new Date(this.valueOf())},i.toJSON=function(){return this.isValid()?this.toISOString():null},i.toISOString=function(){return this.$d.toISOString()},i.toString=function(){return this.$d.toUTCString()},s}(),Te=X.prototype;return b.prototype=Te,[["$ms",n],["$s",r],["$m",l],["$H",h],["$W",x],["$M",F],["$y",O],["$D",H]].forEach(function(s){Te[s[1]]=function(i){return this.$g(i,s[0],s[1])}}),b.extend=function(s,i){return s.$i||(s(i,X,b),s.$i=!0),b},b.locale=K,b.isDayjs=fe,b.unix=function(s){return b(1e3*s)},b.en=L[Y],b.Ls=L,b.p={},b})});var Se=Ot(Tt());function Bt(o,d){if(o&1&&w(0,"nz-option",20),o&2){let m=d.$implicit;E("nzLabel",m.label)("nzValue",m.value)}}function jt(o,d){if(o&1&&w(0,"nz-option",20),o&2){let m=d.$implicit;E("nzLabel",m.name)("nzValue",m.ouId)}}function qt(o,d){if(o&1&&U(0,jt,1,2,"nz-option",20,ie),o&2){let m=$(2);W(m.ous)}}function Ht(o,d){if(o&1&&w(0,"nz-option",20),o&2){let m=d.$implicit;E("nzLabel",m.name)("nzValue",m.userId)}}function Rt(o,d){if(o&1&&U(0,Ht,1,2,"nz-option",20,ie),o&2){let m=$(2);W(m.users)}}var Ut=(o,d)=>d.questionId;function Wt(o,d){if(o&1&&w(0,"nz-option",20),o&2){let m=d.$implicit;E("nzLabel",m.job)("nzValue",m.questionId)}}function Yt(o,d){if(o&1){let m=q();f(0,"button",24),T("click",function(){I(m);let r=$().$index,l=$(2);return V(l.deleteQuestion(r))}),C(1,"\u5220\u9664"),p()}}function Gt(o,d){if(o&1){let m=q();f(0,"tr",21)(1,"td"),C(2),p(),f(3,"td"),C(4),p(),f(5,"td")(6,"nz-form-item",22)(7,"nz-form-control")(8,"nz-select",23),U(9,Wt,1,2,"nz-option",20,Ut),p()()()(),f(11,"td"),C(12),p(),f(13,"td"),C(14),p(),f(15,"td")(16,"button",24),T("click",function(){I(m);let r=$(2);return V(r.addQuestion())}),C(17,"\u6DFB\u52A0"),p(),j(18,Yt,2,0,"button",25),p()()}if(o&2){let m=d.$implicit,n=d.$index,r=$(2),l,h,x,P;E("formGroupName",n),y(2),Z((l=r.getQuestion(m.value.examineQuestionId))==null?null:l.no),y(2),Z((h=r.getQuestion(m.value.examineQuestionId))==null?null:h.catalog),y(5),W(r.questions),y(3),Z((x=r.getQuestion(m.value.examineQuestionId))==null?null:x.jobItem),y(2),Z((P=r.getQuestion(m.value.examineQuestionId))==null?null:P.integral),y(4),_e(18,n!=0?18:-1)}}var Jt=()=>({x:"auto",y:"30vh"});function Zt(o,d){if(o&1){let m=q();ge(0),f(1,"form",2)(2,"div",3)(3,"div",4)(4,"nz-form-item")(5,"nz-form-label",5),C(6,"\u8003\u6838\u6807\u9898"),p(),f(7,"nz-form-control"),w(8,"input",6),p()()(),f(9,"div",4)(10,"nz-form-item")(11,"nz-form-label",5),C(12,"\u8003\u6838\u5468\u671F"),p(),f(13,"nz-form-control")(14,"nz-select",7),T("ngModelChange",function(r){I(m);let l=$();return V(l.timeTypeChange(r))}),U(15,Bt,1,2,"nz-option",20,ie),p()()()()(),f(17,"div",3)(18,"div",4)(19,"nz-form-item")(20,"nz-form-label",5),C(21,"\u5F00\u59CB\u65E5\u671F"),p(),f(22,"nz-form-control"),w(23,"nz-date-picker",8),p()()(),f(24,"div",4)(25,"nz-form-item")(26,"nz-form-label",5),C(27,"\u7ED3\u675F\u65E5\u671F"),p(),f(28,"nz-form-control"),w(29,"nz-date-picker",9),p()()()(),f(30,"nz-form-item")(31,"nz-form-label",10),C(32,"\u5C01\u9762\u56FE"),p(),f(33,"nz-form-control"),w(34,"app-upload",11),p()(),f(35,"nz-form-item")(36,"nz-form-label",10),C(37,"\u8003\u6838\u5BF9\u8C61"),p(),f(38,"nz-form-control")(39,"nz-select",12),j(40,qt,2,0)(41,Rt,2,0),p()()(),f(42,"nz-table",13,14)(44,"thead")(45,"tr")(46,"th",15),C(47,"\u7F16\u53F7"),p(),f(48,"th",15),C(49,"\u7F16\u53F7\u53CA\u7C7B\u522B"),p(),f(50,"th",16),C(51,"\u7F16\u53F7\u53CA\u4EFB\u52A1\u9879"),p(),f(52,"th"),C(53,"\u7F16\u53F7\u53CA\u5177\u4F53\u4EFB\u52A1"),p(),f(54,"th",17),C(55,"\u5206\u6570"),p(),f(56,"th",18),C(57,"\u64CD\u4F5C"),p()()(),f(58,"tbody"),ge(59,19),U(60,Gt,19,6,"tr",21,Ne),Ce(),p()()(),Ce()}if(o&2){let m=$();y(1),E("formGroup",m.validateForm),y(1),E("nzGutter",12),y(13),W(m.timeTypes),y(2),E("nzGutter",12),y(23),_e(40,m.entity.examineType==0?40:41),y(2),E("nzScroll",xe(8,Jt))("nzBordered",!0)("nzFrontPagination",!1)("nzData",m.validateForm.controls.examineQuestions.controls),y(18),W(m.validateForm.controls.examineQuestions.controls)}}var Kt=()=>({padding:"15px",height:"70vh","max-height":"100vh"}),Mt=(()=>{let d=class d{get isVisible(){return this._isVisible}set isVisible(n){this._isVisible=n,n&&this.entity&&(this.validateForm.patchValue(Object.assign({},this.entity)),this.entity.examineType==1&&(this.validateForm.controls.officePendUserId.clearValidators(),this.validateForm.controls.officePendUserId.markAsDirty(),this.validateForm.controls.officePendUserId.updateValueAndValidity()),this.entity.examineQuestionIds?.length>0?this.entity.examineQuestionIds.forEach(r=>{this.createNewRow(r)}):this.createNewRow(),this.getQuestions())}constructor(n,r,l,h,x){this.client=n,this.fb=r,this.userClient=l,this.ouClient=h,this.questionClient=x,this._isVisible=!1,this.isVisibleChange=new he,this.onSuccess=new he,this.validateForm=this.fb.group({examineId:[],examineType:[],timeType:[0,[Q.required]],startDate:[new Date,[Q.required]],endDate:[(0,Se.default)().add(7,"d").toDate(),[Q.required]],title:["",[Q.required]],pic:["",[Q.required]],departmentPendUserId:[""],officePendUserId:[""],examineObjectIds:new be({value:[],disabled:!1},[Q.required]),examineQuestions:this.fb.array([])}),this.timeTypes=[{label:"\u5468",value:0},{label:"\u6708",value:1},{label:"\u5B63\u5EA6",value:2},{label:"\u5E74",value:3}],this.users=[],this.ous=[],this.questions=[]}ngOnInit(){this.getOus(),this.getUsers()}getUsers(){this.userClient.getAll().subscribe(n=>{this.users=n})}getOus(){this.ouClient.getAll().subscribe(n=>{this.ous=n})}getQuestions(){this.questionClient.getAll(this.entity?.examineType??0).subscribe(n=>{this.questions=n})}getQuestion(n){return this.questions.find(r=>r.questionId==n)}createNewRow(n=""){var r=this.fb.group({examineQuestionId:new be("",[Q.required])});n&&r.patchValue({examineQuestionId:n}),this.validateForm.controls.examineQuestions.push(r)}handleCancel(){this.validateForm.controls.examineQuestions.clear(),this.validateForm.reset(),this.isVisibleChange.emit(!1)}handleOk(){Ye(this.validateForm)&&this.client.insertOrUpdate(Object.assign({},this.validateForm.value,{examineQuestionIds:this.validateForm.value.examineQuestions.map(n=>n.examineQuestionId)})).subscribe(()=>{this.onSuccess.emit(),this.handleCancel()})}addQuestion(){this.createNewRow()}deleteQuestion(n){this.validateForm.controls.examineQuestions.removeAt(n)}timeTypeChange(n){console.log(n);var r=(0,Se.default)(this.validateForm.value.startDate);n==0?this.validateForm.controls.endDate.setValue(r.add(7,"d").toDate()):n==1?this.validateForm.controls.endDate.setValue(r.add(1,"month").toDate()):n==2?this.validateForm.controls.endDate.setValue(r.add(3,"month").toDate()):n==3&&this.validateForm.controls.endDate.setValue(r.add(1,"year").toDate())}};d.\u0275fac=function(r){return new(r||d)(N(ce),N(We),N(at),N(nt),N(rt))},d.\u0275cmp=te({type:d,selectors:[["app-examine-edit"]],inputs:{entity:"entity",isVisible:"isVisible"},outputs:{isVisibleChange:"isVisibleChange",onSuccess:"onSuccess"},standalone:!0,features:[ne],decls:2,vars:3,consts:[["nzTitle","\u5728\u7EBF\u8003\u6838\u7F16\u8F91","nzxModalDrag","","nzWidth","60%",3,"nzVisible","nzBodyStyle","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],["nz-form","",3,"formGroup"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","12"],["nzSpan","4","nzRequired",""],["nz-input","","formControlName","title"],["formControlName","timeType",3,"ngModelChange"],["nzShowTime","","formControlName","startDate"],["nzShowTime","","formControlName","endDate"],["nzSpan","2","nzRequired",""],["formControlName","pic","type","pic"],["nzMode","multiple","formControlName","examineObjectIds"],["nzSize","small",3,"nzScroll","nzBordered","nzFrontPagination","nzData"],["basicTable",""],["nzWidth","100px"],["nzWidth","300px"],["nzWidth","50px"],["nzWidth","150px"],["formArrayName","examineQuestions"],[3,"nzLabel","nzValue"],[3,"formGroupName"],[1,"form-item"],["size","small","nzShowSearch","","formControlName","examineQuestionId"],["nz-button","","nzType","link",3,"click"],["nz-button","","nzType","link"]],template:function(r,l){r&1&&(f(0,"nz-modal",0),T("nzVisibleChange",function(x){return l.isVisible=x})("nzOnCancel",function(){return l.handleCancel()})("nzOnOk",function(){return l.handleOk()}),j(1,Zt,62,9,"ng-container",1),p()),r&2&&E("nzVisible",l.isVisible)("nzBodyStyle",xe(2,Kt))},dependencies:[re,je,Le,Ae,Be,ae,qe,Ue,He,Re,me,Ze,Je,Xe,Ke,tt,et,ut,mt,lt,de,dt,pt,ue,it,Et,St,Dt,ft,$t,bt,gt,ht,_t,zt,Ct,xt,le,se,oe],styles:[".form-wrap[_ngcontent-%COMP%]{padding:15px}[readonly][_ngcontent-%COMP%]{background-color:#efefef}.form-item[_ngcontent-%COMP%]{margin-bottom:0!important}"]});let o=d;return o})();var Xt=["operationTpl"];function ei(o,d){if(o&1){let m=q();f(0,"span",7),T("click",function(){let l=I(m).item,h=$();return V(h.show(l))}),C(1,"\u5BA1\u6838"),p(),f(2,"span",7),T("click",function(){let l=I(m).item,h=$();return V(h.edit(l))}),C(3,"\u7F16\u8F91"),p(),f(4,"span",7),T("click",function(){let l=I(m).item,h=$();return V(h.del(l))}),C(5,"\u5220\u9664"),p()}}function ti(o,d){if(o&1){let m=q();f(0,"button",8),T("click",function(){I(m);let r=$();return V(r.add())}),w(1,"i",9),C(2," \u65B0\u5EFA "),p()}}var ji=(()=>{let d=class d{constructor(n,r,l,h){this.modalService=n,this.client=r,this.activeRoute=l,this.router=h,this.pageHeaderInfo={breadcrumb:["\u9996\u9875","\u5B66\u4E60\u5E73\u53F0","\u5728\u7EBF\u8003\u6838"]},this.cdr=we(Fe),this.dataList=[],this.searchParam={},this.isEditVisible=!1}ngOnInit(){let n=parseInt(this.activeRoute.snapshot.data.examineType);this.searchParam.examineType=n,n==1&&(this.pageHeaderInfo.breadcrumb=["\u9996\u9875","\u8003\u6838\u76D1\u7763\u5E73\u53F0","\u5DE5\u4F5C\u4EFB\u52A1"]),this.initTable()}initTable(){this.tableConfig={headers:[{title:"\u8003\u6838\u6807\u9898",field:"title",width:200},{title:"\u8003\u6838\u5468\u671F",field:"timeTypeDesc",width:200},{title:"\u5F00\u59CB\u65E5\u671F",field:"startDate",pipe:"date:yyyy-MM-dd HH:mm:ss",width:200},{title:"\u7ED3\u675F\u65E5\u671F",field:"endDate",pipe:"date:yyyy-MM-dd HH:mm:ss",width:200},{title:"\u90E8\u95E8\u5BA1\u6838\u4EBA\u5458",field:"departmentPendUserName",width:200},{title:"\u529E\u516C\u5BA4\u5BA1\u6838\u4EBA\u5458",field:"officePendUserName",width:200,show:this.searchParam.examineType==0},{title:"\u64CD\u4F5C",tdTemplate:this.operationTpl,width:120,fixed:!0,fixedDir:"right"}],total:0,showCheckbox:!1,loading:!1,pageSize:10,pageIndex:1}}resetForm(){this.searchParam={},this.getDataList()}getDataList(n){this.tableConfig.loading=!0,this.searchParam.page={pageSize:this.tableConfig.pageSize,pageIndex:n?.pageIndex||this.tableConfig.pageIndex},this.client.list(this.searchParam).pipe(Me(()=>{this.tableLoading(!1)})).subscribe(r=>{let{items:l,page:h}=r;this.dataList=[...l],this.tableConfig.total=h.totalCount,this.tableConfig.pageIndex=h.pageIndex,this.tableLoading(!1)})}add(){this.selectedEntity={examineType:this.searchParam.examineType},this.isEditVisible=!0}edit(n){this.selectedEntity=n,this.isEditVisible=!0}del(n){this.modalService.confirm({nzTitle:"\u786E\u5B9A\u5220\u9664?",nzOnOk:()=>{this.client.delete(n.examineId).subscribe(r=>{this.getDataList()})}})}tableLoading(n){this.tableConfig.loading=n,this.tableChangeDectction()}tableChangeDectction(){this.dataList=[...this.dataList],this.cdr.detectChanges()}changePageSize(n){this.tableConfig.pageSize=n}show(n){this.router.navigate(["/default/manage/examine-object-list"],{queryParams:{examineId:n.examineId}})}};d.\u0275fac=function(r){return new(r||d)(N(st),N(ce),N(Qe),N(Pe))},d.\u0275cmp=te({type:d,selectors:[["app-examine"]],viewQuery:function(r,l){if(r&1&&Oe(Xt,7),r&2){let h;Ve(h=ke())&&(l.operationTpl=h.first)}},standalone:!0,features:[ne],decls:9,vars:7,consts:[[3,"pageHeaderInfo"],[1,"normal-table-wrap"],[3,"btnTpl","tableTitle","reload"],[3,"tableConfig","tableData","changePageNum","changePageSize"],["operationTpl",""],["tableBtns",""],[3,"entity","isVisible","isVisibleChange","onSuccess"],[1,"operate-text",3,"click"],["nz-button","","nzType","primary",1,"m-r-8",3,"click"],["nz-icon","","nzType","plus"]],template:function(r,l){if(r&1&&(w(0,"app-page-header",0),f(1,"div",1)(2,"app-card-table-wrap",2),T("reload",function(){return l.getDataList()}),f(3,"app-ant-table",3),T("changePageNum",function(x){return l.getDataList(x)})("changePageSize",function(x){return l.changePageSize(x)}),p(),j(4,ei,6,0,"ng-template",null,4,ze),p()(),j(6,ti,3,0,"ng-template",null,5,ze),f(8,"app-examine-edit",6),T("isVisibleChange",function(x){return l.isEditVisible=x})("onSuccess",function(){return l.getDataList()}),p()),r&2){let h=Ie(7);E("pageHeaderInfo",l.pageHeaderInfo),y(2),E("btnTpl",h)("tableTitle","\u5728\u7EBF\u8003\u6838\u5217\u8868"),y(1),E("tableConfig",l.tableConfig)("tableData",l.dataList),y(5),E("entity",l.selectedEntity)("isVisible",l.isEditVisible)}},dependencies:[le,se,oe,Ge,ct,yt,vt,Mt,ot,me,re,ae,ue,de]});let o=d;return o})();export{ji as ExamineComponent};
