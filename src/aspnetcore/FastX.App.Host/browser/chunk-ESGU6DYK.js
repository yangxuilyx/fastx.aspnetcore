import{J as Z,Ja as ee,S as x,Y as B,aa as q,ba as J,ia as Q,ja as X,pa as Y,r as K}from"./chunk-R2HTRB5T.js";import{n as U,o as V,q as W,r as G}from"./chunk-FBUG2U6C.js";import{D as O,Db as u,Ha as P,Jb as g,K as N,Kb as v,Lb as h,Mb as I,Nb as _,Pb as H,Xb as w,Zb as D,_ as F,_a as $,f as m,ga as R,jb as r,kb as l,kc as M,la as f,mb as d,oa as y,ob as T,qa as z,qb as S,ta as b,tb as a,ua as j,ub as L,vb as k}from"./chunk-25RHYGPJ.js";import{a as p,b as A}from"./chunk-W7ODNIXK.js";function ne(i,n){i&1&&h(0,"span",10)}function ie(i,n){i&1&&h(0,"span",11)}function se(i,n){i&1&&h(0,"span",12)}function oe(i,n){i&1&&h(0,"span",13)}function ae(i,n){i&1&&h(0,"span",14)}function re(i,n){if(i&1&&(I(0),h(1,"span",15),_()),i&2){let o=D();r(1),a("innerHTML",o.instance.content,$)}}function ce(i,n){if(i&1){let o=H();g(0,"nz-message",2),w("destroyed",function(t){b(o);let s=D();return j(s.remove(t.id,t.userAction))}),v()}if(i&2){let o=n.$implicit;a("instance",o)}}var le=0,E=class{constructor(n,o,e){this.nzSingletonService=n,this.overlay=o,this.injector=e}remove(n){this.container&&(n?this.container.remove(n):this.container.removeAll())}getInstanceId(){return`${this.componentPrefix}-${le++}`}withContainer(n){let o=this.nzSingletonService.getSingletonWithKey(this.componentPrefix);if(o)return o;let e=this.overlay.create({hasBackdrop:!1,scrollStrategy:this.overlay.scrollStrategies.noop(),positionStrategy:this.overlay.position().global()}),t=new Z(n,null,this.injector),s=e.attach(t),c=e.hostElement;return c.style.zIndex="1010",o||(this.container=o=s.instance,this.nzSingletonService.registerSingletonWithKey(this.componentPrefix,o),this.container.afterAllInstancesRemoved.subscribe(()=>{this.container=void 0,this.nzSingletonService.unregisterSingletonWithKey(this.componentPrefix),e.dispose()})),o}},he=(()=>{let n=class n{constructor(e,t){this.cdr=e,this.nzConfigService=t,this.instances=[],this._afterAllInstancesRemoved=new m,this.afterAllInstancesRemoved=this._afterAllInstancesRemoved.asObservable(),this.destroy$=new m,this.updateConfig()}ngOnInit(){this.subscribeConfigChange()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}create(e){let t=this.onCreate(e);return this.instances.length>=this.config.nzMaxStack&&(this.instances=this.instances.slice(1)),this.instances=[...this.instances,t],this.readyInstances(),t}remove(e,t=!1){this.instances.map((s,c)=>({index:c,instance:s})).filter(({instance:s})=>s.messageId===e).forEach(({index:s,instance:c})=>{this.instances.splice(s,1),this.instances=[...this.instances],this.onRemove(c,t),this.readyInstances()}),this.instances.length||this.onAllInstancesRemoved()}removeAll(){this.instances.forEach(e=>this.onRemove(e,!1)),this.instances=[],this.readyInstances(),this.onAllInstancesRemoved()}onCreate(e){return e.options=this.mergeOptions(e.options),e.onClose=new m,e}onRemove(e,t){e.onClose.next(t),e.onClose.complete()}onAllInstancesRemoved(){this._afterAllInstancesRemoved.next(),this._afterAllInstancesRemoved.complete()}readyInstances(){this.cdr.detectChanges()}mergeOptions(e){let{nzDuration:t,nzAnimate:s,nzPauseOnHover:c}=this.config;return p({nzDuration:t,nzAnimate:s,nzPauseOnHover:c},e)}};n.\u0275fac=function(t){return new(t||n)(l(d),l(x))},n.\u0275dir=z({type:n});let i=n;return i})(),pe=(()=>{let n=class n{constructor(e){this.cdr=e,this.destroyed=new T,this.animationStateChanged=new m,this.userAction=!1,this.eraseTimer=null}ngOnInit(){this.options=this.instance.options,this.options.nzAnimate&&(this.instance.state="enter",this.animationStateChanged.pipe(O(e=>e.phaseName==="done"&&e.toState==="leave"),N(1)).subscribe(()=>{clearTimeout(this.closeTimer),this.destroyed.next({id:this.instance.messageId,userAction:this.userAction})})),this.autoClose=this.options.nzDuration>0,this.autoClose&&(this.initErase(),this.startEraseTimeout())}ngOnDestroy(){this.autoClose&&this.clearEraseTimeout(),this.animationStateChanged.complete()}onEnter(){this.autoClose&&this.options.nzPauseOnHover&&(this.clearEraseTimeout(),this.updateTTL())}onLeave(){this.autoClose&&this.options.nzPauseOnHover&&this.startEraseTimeout()}destroy(e=!1){this.userAction=e,this.options.nzAnimate?(this.instance.state="leave",this.cdr.detectChanges(),this.closeTimer=setTimeout(()=>{this.closeTimer=void 0,this.destroyed.next({id:this.instance.messageId,userAction:e})},200)):this.destroyed.next({id:this.instance.messageId,userAction:e})}initErase(){this.eraseTTL=this.options.nzDuration,this.eraseTimingStart=Date.now()}updateTTL(){this.autoClose&&(this.eraseTTL-=Date.now()-this.eraseTimingStart)}startEraseTimeout(){this.eraseTTL>0?(this.clearEraseTimeout(),this.eraseTimer=setTimeout(()=>this.destroy(),this.eraseTTL),this.eraseTimingStart=Date.now()):this.destroy()}clearEraseTimeout(){this.eraseTimer!==null&&(clearTimeout(this.eraseTimer),this.eraseTimer=null)}};n.\u0275fac=function(t){return new(t||n)(l(d))},n.\u0275dir=z({type:n});let i=n;return i})(),me=(()=>{let n=class n extends pe{constructor(e){super(e),this.destroyed=new T}};n.\u0275fac=function(t){return new(t||n)(l(d))},n.\u0275cmp=y({type:n,selectors:[["nz-message"]],inputs:{instance:"instance"},outputs:{destroyed:"destroyed"},exportAs:["nzMessage"],standalone:!0,features:[S,M],decls:10,vars:9,consts:[[1,"ant-message-notice",3,"mouseenter","mouseleave"],[1,"ant-message-notice-content"],[1,"ant-message-custom-content",3,"ngClass"],[3,"ngSwitch"],["nz-icon","","nzType","check-circle",4,"ngSwitchCase"],["nz-icon","","nzType","info-circle",4,"ngSwitchCase"],["nz-icon","","nzType","exclamation-circle",4,"ngSwitchCase"],["nz-icon","","nzType","close-circle",4,"ngSwitchCase"],["nz-icon","","nzType","loading",4,"ngSwitchCase"],[4,"nzStringTemplateOutlet"],["nz-icon","","nzType","check-circle"],["nz-icon","","nzType","info-circle"],["nz-icon","","nzType","exclamation-circle"],["nz-icon","","nzType","close-circle"],["nz-icon","","nzType","loading"],[3,"innerHTML"]],template:function(t,s){t&1&&(g(0,"div",0),w("@moveUpMotion.done",function(te){return s.animationStateChanged.next(te)})("mouseenter",function(){return s.onEnter()})("mouseleave",function(){return s.onLeave()}),g(1,"div",1)(2,"div",2),I(3,3),u(4,ne,1,0,"span",4)(5,ie,1,0,"span",5)(6,se,1,0,"span",6)(7,oe,1,0,"span",7)(8,ae,1,0,"span",8),_(),u(9,re,2,1,"ng-container",9),v()()()),t&2&&(a("@moveUpMotion",s.instance.state),r(2),a("ngClass","ant-message-"+s.instance.type),r(1),a("ngSwitch",s.instance.type),r(1),a("ngSwitchCase","success"),r(1),a("ngSwitchCase","info"),r(1),a("ngSwitchCase","warning"),r(1),a("ngSwitchCase","error"),r(1),a("ngSwitchCase","loading"),r(1),a("nzStringTemplateOutlet",s.instance.content))},dependencies:[U,W,G,X,Q,J,q],encapsulation:2,data:{animation:[B]},changeDetection:0});let i=n;return i})(),C="message",de={nzAnimate:!0,nzDuration:3e3,nzMaxStack:7,nzPauseOnHover:!0,nzTop:24,nzDirection:"ltr"},ge=(()=>{let n=class n extends he{constructor(e,t){super(e,t),this.dir="ltr";let s=this.nzConfigService.getConfigForComponent(C);this.dir=s?.nzDirection||"ltr"}subscribeConfigChange(){this.nzConfigService.getConfigChangeEventForComponent(C).pipe(F(this.destroy$)).subscribe(()=>{this.updateConfig();let e=this.nzConfigService.getConfigForComponent(C);if(e){let{nzDirection:t}=e;this.dir=t||this.dir}})}updateConfig(){this.config=p(p(p({},de),this.config),this.nzConfigService.getConfigForComponent(C)),this.top=K(this.config.nzTop),this.cdr.markForCheck()}};n.\u0275fac=function(t){return new(t||n)(l(d),l(x))},n.\u0275cmp=y({type:n,selectors:[["nz-message-container"]],exportAs:["nzMessageContainer"],standalone:!0,features:[S,M],decls:2,vars:5,consts:[[1,"ant-message"],[3,"instance","destroyed",4,"ngFor","ngForOf"],[3,"instance","destroyed"]],template:function(t,s){t&1&&(g(0,"div",0),u(1,ce,1,1,"nz-message",1),v()),t&2&&(L("top",s.top),k("ant-message-rtl",s.dir==="rtl"),r(1),a("ngForOf",s.instances))},dependencies:[me,V],encapsulation:2,changeDetection:0});let i=n;return i})();var ke=(()=>{let n=class n extends E{constructor(e,t,s){super(e,t,s),this.componentPrefix="message-"}success(e,t){return this.createInstance({type:"success",content:e},t)}error(e,t){return this.createInstance({type:"error",content:e},t)}info(e,t){return this.createInstance({type:"info",content:e},t)}warning(e,t){return this.createInstance({type:"warning",content:e},t)}loading(e,t){return this.createInstance({type:"loading",content:e},t)}create(e,t,s){return this.createInstance({type:e,content:t},s)}createInstance(e,t){return this.container=this.withContainer(ge),this.container.create(A(p({},e),{createdAt:new Date,messageId:this.getInstanceId(),options:t}))}};n.\u0275fac=function(t){return new(t||n)(f(Y),f(ee),f(P))},n.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"});let i=n;return i})();export{ke as a};
