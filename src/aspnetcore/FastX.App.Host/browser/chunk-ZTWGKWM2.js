import{b as ve}from"./chunk-HX46T5TW.js";import{b as ye}from"./chunk-3LEP76YH.js";import{b as be,c as Se}from"./chunk-NN5I4ZQ6.js";import{a as q,b as B,c as P,f as he}from"./chunk-36JYQPX4.js";import"./chunk-JQ4W37JH.js";import"./chunk-GOVML6XL.js";import{a as re}from"./chunk-GGEG7LNG.js";import{k as fe,l as ze,m as ge,n as Ce}from"./chunk-QA3WNWTC.js";import"./chunk-ZV26Q6Z5.js";import"./chunk-4V3WCFNY.js";import{R as M,S as w,T as I,U as Q,V as L,ba as pe,d as $,da as ue,e as f,f as N,fa as O,g as E,h as ee,j as te,k as F,l as ie,o as ne,q as oe,r as V,s as T,v as x,w as D}from"./chunk-K3UCEQBL.js";import{a as _e}from"./chunk-AAN5EPXW.js";import"./chunk-TH67R3V7.js";import{a as de,b as ce}from"./chunk-3OVYBGXJ.js";import"./chunk-C6FDTAOV.js";import"./chunk-IUQ3UXTC.js";import{Na as ae,Oa as le,Qa as me,Ra as se,lb as k}from"./chunk-R2HTRB5T.js";import"./chunk-HDIAUTON.js";import"./chunk-YRUIOUIJ.js";import"./chunk-FBUG2U6C.js";import{Db as h,Jb as t,Kb as i,Lb as p,Mb as U,Nb as J,P as G,Pb as R,Xb as d,Zb as C,bc as K,cc as u,jb as l,kb as g,kc as y,lc as _,ma as H,mb as W,oa as b,ob as j,ta as S,tb as a,ua as v,vc as X,wc as Y,yc as Z,zc as A}from"./chunk-25RHYGPJ.js";import"./chunk-W7ODNIXK.js";function we(s,m){if(s&1&&(U(0),t(1,"form",2)(2,"nz-form-item")(3,"nz-form-label",3),u(4,"\u7F16\u53F7"),i(),t(5,"nz-form-control"),p(6,"input",4),i()(),t(7,"nz-form-item")(8,"nz-form-label",3),u(9,"\u9898\u5E93\u7C7B\u578B"),i(),t(10,"nz-form-control")(11,"nz-select",5),p(12,"nz-option",6)(13,"nz-option",7),i()()(),t(14,"nz-form-item")(15,"nz-form-label",3),u(16,"\u7F16\u53F7\u53CA\u7C7B\u522B"),i(),t(17,"nz-form-control"),p(18,"input",8),i()(),t(19,"nz-form-item")(20,"nz-form-label",3),u(21,"\u7F16\u53F7\u53CA\u4EFB\u52A1\u9879"),i(),t(22,"nz-form-control"),p(23,"input",9),i()(),t(24,"nz-form-item")(25,"nz-form-label",3),u(26,"\u5206\u6570"),i(),t(27,"nz-form-control"),p(28,"input",10),i()(),t(29,"nz-form-item")(30,"nz-form-label",3),u(31,"\u7F16\u53F7\u53CA\u5177\u4F53\u4EFB\u52A1"),i(),t(32,"nz-form-control")(33,"nz-input-group"),p(34,"textarea",11),i()()()(),J()),s&2){let z=C();l(1),a("formGroup",z.validateForm),l(11),a("nzValue",0),l(1),a("nzValue",1),l(21),a("rows",10)}}var Ie=()=>({padding:"15px",height:"70vh"}),Ne=(()=>{let m=class m{get isVisible(){return this._isVisible}set isVisible(n){this._isVisible=n,n&&this.entity&&this.validateForm.patchValue(this.entity)}constructor(n,o){this.client=n,this.fb=o,this._isVisible=!1,this.isVisibleChange=new j,this.onSuccess=new j,this.validateForm=this.fb.group({questionId:[],no:["",[f.required]],catalog:["",[f.required]],job:["",[f.required]],jobItem:["",[f.required]],integral:[0,f.required],questionType:[0,f.required]})}ngOnInit(){}handleCancel(){this.validateForm.reset(),this.isVisibleChange.emit(!1)}handleOk(){re(this.validateForm)&&this.client.insertOrUpdate(this.validateForm.value).subscribe(()=>{this.onSuccess.emit(),this.handleCancel()})}};m.\u0275fac=function(o){return new(o||m)(g(k),g(oe))},m.\u0275cmp=b({type:m,selectors:[["app-question-edit"]],inputs:{entity:"entity",isVisible:"isVisible"},outputs:{isVisibleChange:"isVisibleChange",onSuccess:"onSuccess"},standalone:!0,features:[y],decls:2,vars:3,consts:[["nzTitle","\u9898\u5E93\u7F16\u8F91","nzxModalDrag","","nzWidth","60%",3,"nzVisible","nzBodyStyle","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],["nz-form","",3,"formGroup"],["nzSpan","2","nzRequired",""],["nz-input","","formControlName","no"],["formControlName","questionType"],["nzLabel","\u90E8\u95E8\u9898\u5E93",3,"nzValue"],["nzLabel","\u7528\u6237\u9898\u5E93",3,"nzValue"],["nz-input","","formControlName","catalog"],["nz-input","","formControlName","job"],["nz-input","","formControlName","integral"],["nz-input","","formControlName","jobItem",3,"rows"]],template:function(o,e){o&1&&(t(0,"nz-modal",0),d("nzVisibleChange",function(c){return e.isVisible=c})("nzOnCancel",function(){return e.handleCancel()})("nzOnOk",function(){return e.handleOk()}),h(1,we,35,4,"ng-container",1),i()),o&2&&a("nzVisible",e.isVisible)("nzBodyStyle",_(2,Ie))},dependencies:[V,F,$,N,E,T,ie,ne,L,D,x,w,M,Q,I,Ce,ge,ze,P,q,B,O,pe,ue,ve,ye,he]});let s=m;return s})();var Qe=["operationTpl"];function Le(s,m){if(s&1){let z=R();t(0,"span",20),d("click",function(){let e=S(z).item,r=C();return v(r.edit(e))}),u(1,"\u7F16\u8F91"),i(),t(2,"span",20),d("click",function(){let e=S(z).item,r=C();return v(r.del(e))}),u(3,"\u5220\u9664"),i()}}function Oe(s,m){if(s&1){let z=R();t(0,"button",21),d("click",function(){S(z);let o=C();return v(o.add())}),p(1,"i",22),u(2," \u65B0\u5EFA "),i()}}var ke=()=>({"padding-bottom":0}),qe=()=>({xs:8,sm:16,md:24}),Be=()=>({standalone:!0}),ht=(()=>{let m=class m{constructor(n,o){this.modalService=n,this.client=o,this.pageHeaderInfo={breadcrumb:["\u9996\u9875","\u5B66\u4E60\u5E73\u53F0","\u9898\u5E93"]},this.cdr=H(W),this.dataList=[],this.searchParam={},this.isEditVisible=!1}ngOnInit(){this.initTable()}initTable(){this.tableConfig={headers:[{title:"\u7F16\u53F7",field:"no",width:200},{title:"\u9898\u5E93\u7C7B\u578B",field:"questionTypeDesc",width:200},{title:"\u7F16\u53F7\u53CA\u7C7B\u522B",field:"catalog",width:200},{title:"\u7F16\u53F7\u53CA\u4EFB\u52A1\u9879",field:"job",width:200},{title:"\u7F16\u53F7\u53CA\u5177\u4F53\u4EFB\u52A1",field:"jobItem",width:200},{title:"\u5206\u6570",field:"integral",width:200},{title:"\u64CD\u4F5C",tdTemplate:this.operationTpl,width:120,fixed:!0,fixedDir:"right"}],total:0,showCheckbox:!1,loading:!1,pageSize:10,pageIndex:1}}resetForm(){this.searchParam={},this.getDataList()}getDataList(n){this.tableConfig.loading=!0,this.searchParam.page={pageSize:this.tableConfig.pageSize,pageIndex:n?.pageIndex||this.tableConfig.pageIndex},this.client.list(this.searchParam).pipe(G(()=>{this.tableLoading(!1)})).subscribe(o=>{let{items:e,page:r}=o;this.dataList=[...e],this.tableConfig.total=r.totalCount,this.tableConfig.pageIndex=r.pageIndex,this.tableLoading(!1)})}add(){this.selectedEntity=null,this.isEditVisible=!0}edit(n){this.selectedEntity=n,this.isEditVisible=!0}del(n){this.modalService.confirm({nzTitle:"\u786E\u5B9A\u5220\u9664?",nzOnOk:()=>{this.client.delete(n.questionId).subscribe(o=>{this.getDataList()})}})}tableLoading(n){this.tableConfig.loading=n,this.tableChangeDectction()}tableChangeDectction(){this.dataList=[...this.dataList],this.cdr.detectChanges()}changePageSize(n){this.tableConfig.pageSize=n}};m.\u0275fac=function(o){return new(o||m)(g(fe),g(k))},m.\u0275cmp=b({type:m,selectors:[["app-question"]],viewQuery:function(o,e){if(o&1&&Y(Qe,7),o&2){let r;X(r=Z())&&(e.operationTpl=r.first)}},standalone:!0,features:[y],decls:28,vars:20,consts:[[3,"pageHeaderInfo"],[1,"normal-table-wrap"],[1,"m-b-10",3,"nzBodyStyle"],["nz-form","",3,"ngSubmit"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],[3,"nzFor"],["nzAllowClear","",3,"ngModel","ngModelOptions","ngModelChange"],["nzLabel","\u90E8\u95E8\u9898\u5E93",3,"nzValue"],["nzLabel","\u7528\u6237\u9898\u5E93",3,"nzValue"],["nz-col","",1,"m-b-8","text-right","p-0",3,"nzSpan"],["nz-button","",3,"nzType"],["nz-icon","","nzType","search"],["nz-button","","type","button",1,"m-l-15",3,"click"],["nz-icon","","nzTheme","outline","nzType","close-circle"],[3,"btnTpl","tableTitle","reload"],[3,"tableConfig","tableData","changePageNum","changePageSize"],["operationTpl",""],["tableBtns",""],[3,"entity","isVisible","isVisibleChange","onSuccess"],[1,"operate-text",3,"click"],["nz-button","","nzType","primary",1,"m-r-8",3,"click"],["nz-icon","","nzType","plus"]],template:function(o,e){if(o&1&&(p(0,"app-page-header",0),t(1,"div",1)(2,"nz-card",2)(3,"form",3),d("ngSubmit",function(){return e.getDataList()}),t(4,"div",4),p(5,"div",5),t(6,"div",5)(7,"nz-form-item")(8,"nz-form-label",6),u(9,"\u9898\u5E93\u7C7B\u578B"),i(),t(10,"nz-form-control")(11,"nz-select",7),d("ngModelChange",function(c){return e.searchParam.questionType=c}),p(12,"nz-option",8)(13,"nz-option",9),i()()()(),t(14,"div",10)(15,"button",11),p(16,"i",12),u(17," \u641C\u7D22 "),i(),t(18,"button",13),d("click",function(){return e.resetForm()}),p(19,"i",14),u(20," \u91CD\u7F6E "),i()()()()(),t(21,"app-card-table-wrap",15),d("reload",function(){return e.getDataList()}),t(22,"app-ant-table",16),d("changePageNum",function(c){return e.getDataList(c)})("changePageSize",function(c){return e.changePageSize(c)}),i(),h(23,Le,4,0,"ng-template",null,17,A),i()(),h(25,Oe,3,0,"ng-template",null,18,A),t(27,"app-question-edit",19),d("isVisibleChange",function(c){return e.isEditVisible=c})("onSuccess",function(){return e.getDataList()}),i()),o&2){let r=K(26);a("pageHeaderInfo",e.pageHeaderInfo),l(2),a("nzBodyStyle",_(17,ke)),l(2),a("nzGutter",_(18,qe)),l(1),a("nzSpan",6),l(1),a("nzSpan",6),l(5),a("ngModel",e.searchParam.questionType)("ngModelOptions",_(19,Be)),l(1),a("nzValue",0),l(1),a("nzValue",1),l(1),a("nzSpan",6),l(1),a("nzType","primary"),l(6),a("btnTpl",r)("tableTitle","\u9898\u5E93\u5217\u8868"),l(1),a("tableConfig",e.tableConfig)("tableData",e.dataList),l(5),a("entity",e.selectedEntity)("isVisible",e.isEditVisible)}},dependencies:[se,me,ae,le,_e,Se,be,Ne,ce,de,L,D,x,w,M,Q,I,V,F,N,E,te,ee,T,O,P,q,B]});let s=m;return s})();export{ht as QuestionComponent};
