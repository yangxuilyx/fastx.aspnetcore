import{h as a}from"./chunk-R2HTRB5T.js";import{c,f as b,ga as n,la as u}from"./chunk-25RHYGPJ.js";var d=(()=>{let t=class t{create(e){return typeof ResizeObserver>"u"?null:new ResizeObserver(e)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})(),D=(()=>{let t=class t{constructor(e){this.nzResizeObserverFactory=e,this.observedElements=new Map}ngOnDestroy(){this.observedElements.forEach((e,s)=>this.cleanupObserver(s))}observe(e){let s=a(e);return new c(r=>{let v=this.observeElement(s).subscribe(r);return()=>{v.unsubscribe(),this.unobserveElement(s)}})}observeElement(e){if(this.observedElements.has(e))this.observedElements.get(e).count++;else{let s=new b,r=this.nzResizeObserverFactory.create(o=>s.next(o));r&&r.observe(e),this.observedElements.set(e,{observer:r,stream:s,count:1})}return this.observedElements.get(e).stream}unobserveElement(e){this.observedElements.has(e)&&(this.observedElements.get(e).count--,this.observedElements.get(e).count||this.cleanupObserver(e))}cleanupObserver(e){if(this.observedElements.has(e)){let{observer:s,stream:r}=this.observedElements.get(e);s&&s.disconnect(),r.complete(),this.observedElements.delete(e)}}};t.\u0275fac=function(s){return new(s||t)(u(d))},t.\u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();export{D as a};
