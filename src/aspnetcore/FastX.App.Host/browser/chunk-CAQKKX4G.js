import{a as M,b as B}from"./chunk-LFYJK5GB.js";import{a as N}from"./chunk-K3UCEQBL.js";import{Na as R,Oa as w,Qa as q,Ra as A,gb as F,ia as T,ja as S}from"./chunk-R2HTRB5T.js";import{p as E,y as L}from"./chunk-FBUG2U6C.js";import{$a as U,Db as d,F as z,Jb as p,Kb as c,Lb as f,Mb as x,Nb as y,P as h,Zb as s,bc as v,cc as u,ea as g,hc as b,jb as a,kb as _,kc as D,oa as C,p as m,tb as r,zc as I}from"./chunk-25RHYGPJ.js";function P(t,o){if(t&1&&(x(0),f(1,"span",5),p(2,"div",6),u(3,"Upload"),c(),y()),t&2){let e=s(2);a(1),r("nzType",e.loading?"loading":"plus")}}function V(t,o){if(t&1&&f(0,"img",7),t&2){let e=s(2);r("src",e.fileUrl,U)}}function G(t,o){if(t&1&&(p(0,"nz-upload",2),d(1,P,4,1,"ng-container",3)(2,V,1,1,"img",4),c()),t&2){let e=s();r("nzShowUploadList",!1)("nzCustomRequest",e.nzCustomRequest)("nzDisabled",e.isDisabled)("nzAccept",e.accept),a(1),r("ngIf",!e.fileUrl),a(1),r("ngIf",e.fileUrl)}}function W(t,o){if(t&1&&(p(0,"nz-upload",8)(1,"button",9),f(2,"span",10),u(3," \u4E0A\u4F20 "),c()()),t&2){let e=s();r("nzCustomRequest",e.nzCustomRequest)("nzFileList",e.fileList)("nzDisabled",e.isDisabled)("nzAccept",e.accept)("nzBeforeUpload",e.beforeUpload),a(1),r("nzLoading",e.loading)}}var ae=(()=>{let o=class o{constructor(n){this.fileClient=n,this.type="file",this.fileList=[],this.isDisabled=!1,this.onChange=i=>{},this.loading=!1,this.nzCustomRequest=i=>(this.loading=!0,this.fileClient.upload({data:i.file,fileName:i.file.name}).pipe(z(l=>(i.onError(l,i.file),m(()=>l))),h(()=>{this.loading=!1,i.onProgress({percent:100},i.file)})).subscribe(l=>{i.onSuccess(l,i.file,null),this.fileUrl=l.url,this.onChange(l.url)})),this.beforeUpload=()=>!0}writeValue(n){this.fileUrl=n,n&&this.fileList.push({uid:"1",name:this._fileUrl.substring(this._fileUrl.lastIndexOf("/")+1),url:this.fileUrl})}registerOnChange(n){this.onChange=n}registerOnTouched(n){}setDisabledState(n){this.isDisabled=n}ngOnInit(){}get fileUrl(){return this._fileUrl?this.fileClient.getBaseUrl("")+this._fileUrl:""}set fileUrl(n){this._fileUrl=n}};o.\u0275fac=function(i){return new(i||o)(_(F))},o.\u0275cmp=C({type:o,selectors:[["app-upload"]],inputs:{type:"type",accept:"accept"},standalone:!0,features:[b([{provide:N,useExisting:g(()=>o),multi:!0}]),D],decls:3,vars:2,consts:[["class","avatar-uploader","nzName","avatar","nzListType","picture-card",3,"nzShowUploadList","nzCustomRequest","nzDisabled","nzAccept",4,"ngIf","ngIfElse"],["fileTpl",""],["nzName","avatar","nzListType","picture-card",1,"avatar-uploader",3,"nzShowUploadList","nzCustomRequest","nzDisabled","nzAccept"],[4,"ngIf"],["style","width: 100%",3,"src",4,"ngIf"],["nz-icon","",1,"upload-icon",3,"nzType"],[1,"ant-upload-text"],[2,"width","100%",3,"src"],[3,"nzCustomRequest","nzFileList","nzDisabled","nzAccept","nzBeforeUpload"],["nz-button","",3,"nzLoading"],["nz-icon","","nzType","upload"]],template:function(i,l){if(i&1&&d(0,G,3,6,"nz-upload",0)(1,W,4,6,"ng-template",null,1,I),i&2){let O=v(2);r("ngIf",l.type=="pic")("ngIfElse",O)}},dependencies:[L,E,B,M,S,T,A,q,R,w]});let t=o;return t})();export{ae as a};
